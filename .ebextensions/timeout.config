container_commands:
  01_timeout_command_client_header:
    command: "sed -i 's/client_header_timeout 60;/#client_header_timeout 60;/' /etc/nginx/nginx.conf"
  02_timeout_command_body_header:
    command: "sed -i 's/client_body_timeout   60;/#client_body_timeout   60;/' /etc/nginx/nginx.conf"
  03_timeout_command_keepalive:
    command: "sed -i 's/keepalive_timeout     60;/#keepalive_timeout     60;/' /etc/nginx/nginx.conf"
  04_restart_nginx:
    command: "sudo service nginx reload"

files:
  "/etc/nginx/conf.d/elasticbeanstalk/nginx.custom.conf":
    mode: "644"
    owner: "root"
    group: "root"
    content: |
      client_header_timeout   300;
      client_body_timeout     300;
      send_timeout            300;
      proxy_connect_timeout   300;
      proxy_read_timeout      300;
      proxy_send_timeout      300;
      keepalive_timeout       300;